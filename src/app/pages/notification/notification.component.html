<div
  class="flex align-items-center justify-content-center min-h-screen lg:mx-5 lg:my-5"
>
  <div class="surface-card p-4 shadow-2 border-round w-full">
    <div class="flex flex-row gap-2 align-items-center">
      <button
        class="p-button-rounded p-button-text p-button-secondary"
        pButton
        pRipple
        type="button"
        (click)="onBack()"
        icon="pi pi-chevron-left"
        title="Back"
      ></button>
      <h3>Notifications</h3>
    </div>
    <div class="card">
      <p-table [value]="notifications" dataKey="id">
        <ng-template
          pTemplate="body"
          let-notification
          let-editing="editing"
          let-ri="rowIndex"
        >
          <tr class="bg-white hover:surface-100">
            <td>
              <p-cellEditor>
                <ng-template pTemplate="output">
                  <div
                    class="flex flex-row column-gap-5"
                    (click)="onClickNotification(notification)"
                    [ngStyle]="{ cursor: 'pointer' }"
                    role="button"
                  >
                    <div
                      [ngStyle]="{ width: '1rem' }"
                      class="flex align-items-center"
                    >
                      <span
                        *ngIf="isUnread(notification.isActive)"
                        class="status-dot border-round"
                      ></span>
                    </div>
                    <div class="flex flex-column">
                      <h4 class="text-left my-0">
                        {{ notification.notificationHeader }}
                      </h4>
                      <p class="text-left my-0">
                        {{ notification.notificationBody }}
                      </p>
                    </div>
                  </div>
                </ng-template>
              </p-cellEditor>
            </td>
            <td>
              <p-cellEditor>
                <ng-template pTemplate="output"> </ng-template>
              </p-cellEditor>
            </td>
            <td [ngStyle]="{ width: '1rem' }">
              <p-cellEditor>
                <ng-template pTemplate="output">
                  <button
                    title="Delete Notification"
                    pButton
                    pRipple
                    type="button"
                    icon="pi pi-trash"
                    (click)="
                      confirm(
                        notification.notificationId,
                        ri,
                        notification.isActive
                      )
                    "
                    class="p-button-rounded p-button-text p-button-danger"
                  ></button>
                </ng-template>
              </p-cellEditor>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>
  </div>
</div>

<p-toast />
<p-confirmDialog #cd>
  <ng-template pTemplate="headless" let-message>
    <div
      class="flex flex-column align-items-center p-5 surface-overlay border-round"
    >
      <div
        class="inline-flex justify-content-center align-items-center h-15rem w-15rem"
      >
        <img
          src="../../../assets/images/confirmation/Yes or no-amico.svg"
          alt=""
        />
      </div>
      <span class="font-bold text-2xl block mb-2 mt-4">
        {{ message.header }}
      </span>
      <p class="mb-0">{{ message.message }}</p>
      <div class="flex align-items-center gap-2 mt-4">
        <button
          pButton
          label="Yes"
          (click)="cd.accept()"
          class="w-8rem"
        ></button>
        <button
          pButton
          label="No"
          (click)="cd.reject()"
          class="p-button-outlined w-8rem"
        ></button>
      </div>
    </div>
  </ng-template>
</p-confirmDialog>
